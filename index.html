<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Rock Paper Scissors</title>
</head>
<body>
    <script>
        //Allow the computer to randomly select an rps option
        function computerPlay(){
            let gameArray = ['rock','paper','scissors'];
            let randomSelection = Math.floor(Math.random() * gameArray.length);
            let computerSelection = gameArray[randomSelection];
            return computerSelection;
        }
       
        //Run a game of rps
        function playRound(playerSelection, computerSelection){
            //Force lower case to make case-insensitive
            playerSelection = playerSelection.toLowerCase();
            computerSelection = computerSelection.toLowerCase();
            // switch statement to check the winner
            switch(true) {
                case playerSelection == 'rock' && computerSelection == 'scissors':
                    return "Player wins!";
                    break;
                case playerSelection == 'rock' && computerSelection == 'paper': 
                    return "Computer wins!";
                    break;
                case playerSelection == 'scissors' && computerSelection == 'rock':
                    return "Computer wins!";
                    break;
                case playerSelection == 'scissors' && computerSelection == 'paper':
                    return "Player wins!";
                    break;
                case playerSelection == 'paper' && computerSelection == 'rock':
                    return "Player wins!";
                    break;
                case playerSelection == 'paper' && computerSelection == 'scissors':
                    return "Computer wins!";
                    break;
                case playerSelection == computerSelection:
                    return "It's a tie!";
                    break;
                default:
                    return "Something went wrong!";
                    break;
            }
        }
        //Play game 5 times
        function game(){
            //Tally's need defined before the loop, otherwise they are out of scope
            let compTally = 0;
            let playTally = 0;
            
            for(let i = 0; i < 5; i++){
            //declare variables and ask for user input
            let result = '';
            const playerSelection = prompt("Enter rock, paper, or scissors");
            const computerSelection = computerPlay();
            
           
            //Apply playRound result to result variable
            result = playRound(playerSelection, computerSelection);
           
            //log results, tell player what computer rng'd
            console.log('Player picked: ' + playerSelection + "!");
            console.log('Computer picked: ' + computerSelection + "!");
            console.log(result);
            //Tally up the results
            if (result == 'Computer wins!'){
                compTally++;
            } else if(result == 'Player wins!'){
                playTally++;
            }

        }//end of for loop

        //Figure out tally result, then display it
        if(compTally > playTally){
            console.log('Computer takes the set!');
        }else if (compTally < playTally){
            console.log('Player takes the set!');
        }else{
            console.log('Set is a tie!');
        }
        }//end of game function
        //call game
        game();
    </script>
</body>
</html>